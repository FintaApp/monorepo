fragment DBUserFields on users {
  id
  display_name: displayName
  metadata
  disabled
  created_at: createdAt
  password_hash: passwordHash
  email
}

fragment AllBackendUserFields on users {
  __typename
  id
  email
  displayName
  metadata
  disabled
  createdAt
  profile {
    stripeData {
      hasAppAccess
      trialEndsAt
      customer {
        id
        createdAt
      }
      subscription {
        id
        status
        cancelAtPeriodEnd
        trialStartedAt
        trialEndedAt
        startedAt
        endedAt
        currentPeriodStart
        currentPeriodEnd
        interval
        canceledAt
      }
    }
  }
}

query GetUserFromToken {
  users {
    id
    displayName
    email
    createdAt
  }
}

query GetUser($userId: uuid!) {
  user(id: $userId) {
    ...AllBackendUserFields
  }
}

mutation UpdateUser($userId: uuid!, $_set: users_set_input = {}, $_append: users_append_input = {}, $_delete_key: users_delete_key_input = {}) {
  updateUser(pk_columns: {id: $userId}, _set: $_set, _append: $_append, _delete_key: $_delete_key) {
    ...AllBackendUserFields
  }
}